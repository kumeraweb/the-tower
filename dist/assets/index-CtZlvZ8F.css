:root{--bg-top: #f5f7fa;--bg-bottom: #e6ecf2;--tower-surface: #e1e7ee;--floor-surface: #f4f7fa;--door-closed: #2f3b45;--door-blocked: #9aa7b4;--door-light: #ffd166;--text-main: #24323d;--text-muted: #617285;--card-white: #ffffff;--line-soft: #cfd8e3;--shadow-soft: 0 8px 22px rgba(31, 53, 77, .08);--transition-fast: .24s ease;--fog-top-width: min(820px, 92%);--fog-bottom-width: min(820px, 92%);--fog-top-width-mobile: min(420px, 84%);--fog-bottom-width-mobile: min(420px, 84%);--fog-top-scale: 1.4;--fog-bottom-scale: 1.4;--tower-floor-width: clamp(300px, 32vw, 560px);--tower-base-width: clamp(380px, 42vw, 760px);--tower-floor-width-mobile: clamp(190px, 52vw, 320px);--tower-base-width-mobile: clamp(240px, 65vw, 430px);--tower-section-width: min(900px, 100%);--tower-floor-frame-width: min(520px, 100%);--tower-base-frame-width: min(800px, 100%);--tower-floor-frame-width-mobile: min(320px, 100%);--scene-avatar-x: 60%;--scene-avatar-y: .8%;--scene-avatar-x-mobile: 60%;--scene-avatar-y-mobile: .8%;--scene-avatar-width: clamp(483px, 44vw, 782px);--scene-avatar-width-mobile: clamp(322px, 76vw, 483px);--tower-logo-width: clamp(225px, 30vw, 425px);--tower-logo-width-mobile: clamp(162px, 45vw, 275px)}*{box-sizing:border-box}html,body,#root{height:100%;min-height:100vh;width:100%;max-width:100%;overflow-x:hidden}body{margin:0;font-family:Inter,"Source Sans 3",Segoe UI,sans-serif;color:var(--text-main);background:linear-gradient(180deg,var(--bg-top),var(--bg-bottom));overflow:hidden;overflow-x:hidden;overscroll-behavior-x:none}.App,.tower-view-shell{height:100vh;width:100%;max-width:100vw;display:flex;gap:20px;padding:20px;overflow:hidden;overflow-x:clip}.main-content{position:relative;--floor-index: 0;--floor-step: clamp(120px, 12vw, 220px);--camera-offset: calc(var(--floor-index) * var(--floor-step));flex:1;min-width:0;min-height:0;display:flex;justify-content:center;align-items:stretch;border-radius:18px;background-color:#1d2530;overflow:hidden;overflow-x:clip;isolation:isolate}.parallax-layer{position:absolute;top:-14%;right:0;bottom:-10%;left:0;pointer-events:none;background-image:url(/assets/background-DXALTb9H.png);background-repeat:no-repeat;background-size:cover;transition:transform .75s ease-in-out;will-change:transform}.parallax-sky{transform:translate3d(0,calc(var(--camera-offset) * .2),0);z-index:1;opacity:.6;filter:saturate(.9) brightness(.95);background-position:center top}.parallax-hills{transform:translate3d(0,calc(var(--camera-offset) * .38),0);z-index:2;opacity:.75;filter:saturate(1) brightness(.96);background-position:center 30%}.parallax-trees{transform:translate3d(0,calc(var(--camera-offset) * .56),0);z-index:3;opacity:.92;filter:saturate(1.05);background-position:center 52%}.tower-world{position:relative;z-index:5;width:100%;height:100%;display:flex;justify-content:center;align-items:stretch}.RankingPanel,.ranking-sidebar{width:clamp(170px,20vw,270px);flex-shrink:0;height:fit-content;position:sticky;top:20px;background:#ffffffc2;border:1px solid var(--line-soft);border-radius:16px;box-shadow:var(--shadow-soft);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);padding:16px;display:flex;flex-direction:column;gap:12px}.ranking-desktop{display:flex}.ranking-sidebar h2{margin:0;font-size:1.15rem;font-weight:700;letter-spacing:.01em}.ranking-sidebar ul{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:9px}.ranking-sidebar li{display:flex;justify-content:space-between;align-items:center;background:var(--card-white);border:1px solid #dde5ee;border-radius:12px;box-shadow:0 4px 10px #13253a0f;padding:10px 12px;transition:transform var(--transition-fast),box-shadow var(--transition-fast)}.ranking-sidebar li:hover{transform:translateY(-1px);box-shadow:0 8px 16px #13253a17}.ranking-sidebar li span{font-weight:600}.ranking-sidebar li strong{font-size:.92rem;color:#415266}.my-progress{margin-top:auto;border-radius:12px;border:1px solid #d8e2ec;background:#eef3f8;padding:10px 12px;font-weight:700}.ranking-mobile-bar{display:none}.ranking-modal-overlay{position:fixed;top:0;right:0;bottom:0;left:0;z-index:60;background:#090e1494;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);display:grid;place-items:center;padding:18px}.ranking-modal-card{width:min(460px,100%);max-height:min(86vh,680px);overflow:auto;border-radius:16px;border:1px solid var(--line-soft);background:#fffffff5;box-shadow:var(--shadow-soft);padding:14px;display:flex;flex-direction:column;gap:10px}.ranking-modal-header{display:flex;justify-content:space-between;align-items:center}.ranking-modal-header h3{margin:0;font-size:1.1rem}.ranking-modal-close{width:34px;height:34px;border-radius:8px;border:1px solid #d4dce5;background:#fff;cursor:pointer;font-weight:800;color:#36475a}.ranking-modal-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}.ranking-modal-list li{display:flex;justify-content:space-between;align-items:center;background:#fff;border:1px solid #dde5ee;border-radius:10px;padding:9px 10px}.tower-section{position:relative;width:var(--tower-section-width);max-width:100%;height:100%;background:transparent;text-align:center;display:flex;flex-direction:column;align-items:center;padding:8px 12px 12px;overflow-x:clip}.tower-header{position:sticky;top:0;width:100%;min-height:52px;z-index:12;display:flex;flex-direction:column;align-items:center;gap:2px;background:transparent;overflow:visible;pointer-events:none}.tower-title{margin:0;position:relative;z-index:8;font-size:1.65rem;font-weight:800;letter-spacing:.01em}.tower-title-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.tower-logo{width:var(--tower-logo-width);max-width:92%;height:auto;position:relative;z-index:8;pointer-events:none}.tower-fog{width:var(--fog-top-width);height:auto;background:transparent;pointer-events:none}.scene-fog-bottom{position:absolute;left:50%;bottom:0;width:var(--fog-bottom-width);max-width:100%;height:auto;z-index:6;opacity:.82;pointer-events:none;--fog-bottom-y-shift: 42%;animation:fog-sway-bottom 6.2s ease-in-out infinite}.audio-toggle-button{position:absolute;top:12px;right:12px;z-index:30;width:38px;height:38px;border-radius:10px;border:1px solid rgba(212,222,234,.92);background:#f8fbffe6;color:#30465d;display:grid;place-items:center;cursor:pointer;box-shadow:0 6px 16px #0f19262e}.tower-viewport{position:relative;width:100%;max-width:100%;flex:1;min-height:0;display:flex;justify-content:center;align-items:flex-end;overflow:hidden;overflow-x:clip;padding-top:4px}.TowerContainer,.tower{background:transparent;border:0;border-radius:0;box-shadow:none;padding:8px 16px 16px;display:flex;flex-direction:column;gap:0;align-items:center;transform:translate3d(0,var(--camera-offset),0);transition:transform .75s ease-in-out;will-change:transform}.FloorCard,.floor{position:relative;width:var(--tower-floor-frame-width);display:flex;justify-content:center;transition:filter var(--transition-fast),transform var(--transition-fast)}.FloorCard+.FloorCard,.floor+.floor{margin-top:-8px}.floor-base{width:var(--tower-base-frame-width)}.floor-current{transform:translateY(-1px)}.floor-current .floor-image{filter:drop-shadow(0 0 10px rgba(255,209,102,.38))}.floor-image{width:100%;max-width:var(--tower-floor-width);height:auto;display:block;-webkit-user-select:none;user-select:none;pointer-events:none}.floor-image-base{max-width:var(--tower-base-width);transform:translateY(-15%)}.floor-label{position:absolute;top:10px;left:14px;font-size:.86rem;font-weight:700;color:#4a5a6b;z-index:2;border-radius:999px;background:#ffffffd1;padding:4px 8px}.door-anchor{position:absolute;top:var(--anchor-top, 55%);left:var(--anchor-left, 50%);width:clamp(58px,5.8vw,84px);height:clamp(124px,13.2vw,186px);transform:translate(-50%,-42%);z-index:4}.door-anchor.anchor-center{--anchor-left: 50%}.door-anchor.anchor-left{--anchor-left: 31%}.door-anchor.anchor-base{--anchor-top: 45.5%}.Door,.door{width:100%;height:100%;border-radius:10px;border:none;background:transparent;z-index:3;transition:transform var(--transition-fast),filter var(--transition-fast),background-color var(--transition-fast),box-shadow var(--transition-fast)}.door-completed,.Door.completed{background:transparent}.door-blocked,.Door.blocked{background:transparent;opacity:1;box-shadow:none}.door:disabled{cursor:not-allowed}.door-current,.Door.open{background:#ffffff05;cursor:pointer;transform:perspective(320px) rotateY(-8deg);box-shadow:0 0 22px #fffbe894,0 0 48px #fff8d66b,inset 0 0 26px 8px #ffffff4d,inset 0 0 64px 18px #fff8d63d;animation:door-pulse 1.8s ease-in-out infinite}.door-current:hover,.Door.open:hover{transform:perspective(320px) rotateY(-10deg) scale(1.04);filter:brightness(1.08);box-shadow:0 0 36px #fffbe8e6,0 0 64px #fff7ccb8,inset 0 0 34px 10px #ffffff6b,inset 0 0 78px 24px #fff8d64d}.player-avatar{position:absolute;left:100%;bottom:var(--avatar-bottom, -2px);width:var(--avatar-width, clamp(84px, 7.2vw, 126px));height:var(--avatar-height, clamp(150px, 13vw, 210px));object-fit:contain;object-position:center bottom;border-radius:0;transform:translate(var(--avatar-offset-x, 16px),var(--avatar-offset-y, 0));z-index:5;pointer-events:none;filter:drop-shadow(0 7px 12px rgba(6,10,15,.48))}.player-avatar.avatar-type-a{--avatar-offset-y: 2px}.player-avatar.avatar-type-b{--avatar-offset-y: -2px}.player-avatar.avatar-base{--avatar-width: clamp(92px, 8vw, 142px);--avatar-height: clamp(158px, 14vw, 226px);--avatar-offset-x: 22px;--avatar-offset-y: -4px}.scene-avatar-flip{position:absolute;left:var(--scene-avatar-x);bottom:var(--scene-avatar-y);width:var(--scene-avatar-width);height:auto;transform:translate(-50%);z-index:9;pointer-events:none;filter:drop-shadow(0 6px 10px rgba(7,12,18,.42))}.tower-fog-top{position:absolute;top:calc(100% - 8px);left:50%;z-index:7;opacity:.95;--fog-top-y-shift: -40%;mix-blend-mode:multiply;animation:fog-sway-top 6.2s ease-in-out infinite}@keyframes door-pulse{0%{box-shadow:0 0 16px #fffbe875,0 0 36px #fff8d64d,inset 0 0 18px 6px #fff3,inset 0 0 50px 12px #fff8d62e}50%{box-shadow:0 0 30px #fffbe8c7,0 0 56px #fff8d68f,inset 0 0 30px 10px #ffffff5c,inset 0 0 74px 22px #fff8d647}to{box-shadow:0 0 16px #fffbe875,0 0 36px #fff8d64d,inset 0 0 18px 6px #fff3,inset 0 0 50px 12px #fff8d62e}}@keyframes fog-sway-top{0%,to{transform:translate3d(calc(-50% - 10px),var(--fog-top-y-shift, 0),0) scale(var(--fog-top-scale))}50%{transform:translate3d(calc(-50% + 10px),var(--fog-top-y-shift, 0),0) scale(var(--fog-top-scale))}}@keyframes fog-sway-bottom{0%,to{transform:translate3d(calc(-50% - 12px),var(--fog-bottom-y-shift, 42%),0) scale(var(--fog-bottom-scale))}50%{transform:translate3d(calc(-50% + 12px),var(--fog-bottom-y-shift, 42%),0) scale(var(--fog-bottom-scale))}}.ChallengeView,.challenge-screen{min-height:100vh;display:grid;place-items:center;padding:20px;background:linear-gradient(180deg,#f2f5f8,#e9eff5)}.challenge-card{width:min(500px,100%);border-radius:16px;border:1px solid var(--line-soft);background:#ffffffd6;box-shadow:var(--shadow-soft);padding:24px;display:flex;flex-direction:column;gap:12px;text-align:center}.challenge-card h2,.challenge-subtitle,.challenge-question,.challenge-feedback{margin:0}.challenge-card h2{font-size:1.6rem;font-weight:800}.challenge-subtitle{color:var(--text-muted);font-weight:600}.challenge-question{font-size:1.05rem;font-weight:700}.challenge-form{display:flex;gap:10px}.challenge-form input{flex:1;background:transparent;border:0;border-bottom:2px solid #aebdcb;border-radius:0;padding:12px 6px;font-size:1rem;text-align:center;color:var(--text-main);outline:none;transition:border-color var(--transition-fast),box-shadow var(--transition-fast)}.challenge-form input:focus{border-bottom-color:#5e7388;box-shadow:0 8px 14px -10px #2d4661b3}.challenge-form button{border:0;border-radius:10px;background:#3e556d;color:#fff;font-size:.97rem;font-weight:700;padding:10px 16px;cursor:pointer;transition:transform var(--transition-fast),background-color var(--transition-fast),box-shadow var(--transition-fast)}.challenge-form button:hover{transform:translateY(-1px);background:#2f465e;box-shadow:0 8px 14px #1e2f4138}.challenge-feedback{min-height:22px;font-weight:700;color:#394a5b}@media (max-width: 840px){.App,.tower-view-shell{gap:8px;padding:8px;padding-bottom:calc(80px + env(safe-area-inset-bottom));height:100dvh}.main-content{flex:1;min-height:0;border-radius:14px;--floor-step: clamp(96px, 15vw, 150px)}.audio-toggle-button{top:10px;right:10px;width:34px;height:34px;border-radius:9px}.ranking-desktop{display:none}.ranking-mobile-bar{position:fixed;left:8px;right:8px;bottom:calc(8px + env(safe-area-inset-bottom));z-index:50;display:grid;grid-template-columns:1fr 1fr auto auto;gap:6px;align-items:center;border-radius:14px;border:1px solid rgba(205,216,228,.9);background:#f1f6fbeb;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);padding:8px;box-shadow:0 8px 24px #0c141e33}.ranking-mobile-item{border-radius:10px;border:1px solid #d8e2ec;background:#fff;padding:8px 9px;display:flex;align-items:center;justify-content:center;gap:6px;font-size:.86rem;font-weight:700;color:#2e3f51;white-space:nowrap}.ranking-mobile-button{border:1px solid #d8e2ec;background:#fff;border-radius:10px;padding:8px 10px;display:flex;align-items:center;justify-content:center;gap:6px;font-size:.82rem;font-weight:700;color:#2d3f52;cursor:pointer;white-space:nowrap}.profile-button{min-width:56px}.tower-section{width:100%;padding:8px 6px}.FloorCard,.floor{width:var(--tower-floor-frame-width-mobile, var(--tower-floor-frame-width))}.floor-image{max-width:var(--tower-floor-width-mobile, var(--tower-floor-width))}.floor-image-base{max-width:var(--tower-base-width-mobile, var(--tower-base-width))}.parallax-layer{top:-12%;right:-12%;bottom:-8%;left:-12%}.tower-title{font-size:1.45rem}.tower-logo{width:var(--tower-logo-width-mobile, var(--tower-logo-width))}.tower-fog{width:var(--fog-top-width-mobile, var(--fog-top-width))}.scene-fog-bottom{width:var(--fog-bottom-width-mobile, var(--fog-bottom-width));bottom:0;--fog-bottom-y-shift: 48%}.player-avatar{--avatar-width: clamp(62px, 15vw, 94px);--avatar-height: clamp(110px, 27vw, 150px);--avatar-offset-x: 10px;--avatar-offset-y: 0px}.player-avatar.avatar-base{--avatar-width: clamp(70px, 18vw, 106px);--avatar-height: clamp(122px, 30vw, 166px);--avatar-offset-x: 12px;--avatar-offset-y: -2px}.scene-avatar-flip{width:var(--scene-avatar-width-mobile);left:var(--scene-avatar-x-mobile, var(--scene-avatar-x));bottom:var(--scene-avatar-y-mobile, var(--scene-avatar-y))}.door-anchor{width:clamp(44px,10.4vw,64px);height:clamp(94px,21vw,132px)}.challenge-form{flex-direction:column}}
